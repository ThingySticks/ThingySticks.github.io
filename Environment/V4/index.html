<!doctype html>
<html lang="en">
 <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Internet of Things Air Quality Sensors for the Particle Photon or Electron. Measures Temperature, Humidity, Pressure, Light and VOCs.">

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

	<meta charset="UTF-8">  
	<title>ThingySticks - Air Quality (Temperature, Humidity, Light, Pressure and VOC) Monitoring</title>

	<!-- Custom CSS -->
    <link href="../../css/round-about.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<link rel="icon" href="../../favicon32.png" sizes="32x32" type="image/png">  
	<link rel="icon" href="../../favicon62.png" sizes="62x62" type="image/png">  
	<link rel="icon" href="../../favicon192.png" sizes="192x192" type="image/png">  

	<meta property="og:url" content="http://ThingySticks.com/Environment/V4">
	<meta property="og:type" content="website">
	<meta property="og:title" content="Air Quality Sensor ThingySticks">
	<meta property="og:image" content="http://ThingySticks.com/Environment/V4/Images/PhotonAirQualityThingyStick1.jpg">
	<meta property="og:description" content="Internet connected air quality sensor. Measure VOCs, Temperature, Humidity, Pressure, Light levels.">
	<meta property="og:site_name" content="ThingySticks">

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-89870513-1', 'auto');
	  ga('send', 'pageview');

	</script>
 </head>

 <body>
 <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">ThingySticks</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="https://github.com/ThingySticks" target="_blank" alt="ThingySticks GitHub Repositories">GitHub</a>
                    </li>
					<li>
                        <a href="https://Tinamous.com" target="_blank" alt="Tinamous.com IoT Platform">Tinamous.com</a>
                    </li>
				</ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

	<!-- Page Content -->
    <div class="container">

        <!-- Introduction Row -->
        <div class="row">
            <div class="col-xs-11 col-sm-7 col-xs-offset-1">
				<h1 class="page-header">Air Quality Monitoring</h1>
                <p>Measure TVOCs, eCO2, Temperature, Humidity, Pressure and Light with the <a href="https://Particle.io" target="_blank">Particle</a> <a href="https://www.particle.io/products/hardware/photon-wifi-dev-kit" target="_blank">Photon</a> or <a href="https://www.particle.io/products/hardware/electron-cellular-dev-kit" target="_blank">Electron</a>.</p>
            </div>
			<div class="col-xs-11 col-sm-2 col-xs-offset-1 col-sm-offset-1">
				<div class="pull-right" style="margin:40px 0 20px">
					<a href="https://www.tindie.com/products/ThingySticks/air-quality-sensor-bme280ccs811-thingystick/" class="btn btn-success btn-lg">Buy now on Tindie</a>
				</div>
			</div>
        </div>

        <!-- Images -->
        <div class="row">
			<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="">

				<!-- Indicators -->
				<ol class="carousel-indicators">
					<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
					<li data-target="#myCarousel" data-slide-to="1"></li>
					<li data-target="#myCarousel" data-slide-to="2"></li>
					<li data-target="#myCarousel" data-slide-to="3"></li>
					<li data-target="#myCarousel" data-slide-to="4"></li>
				</ol>

				<!-- Wrapper for slides -->
				<div class="carousel-inner" role="listbox">
					<div class="item active">
						<a href="Images/PhotonAirQualityThingyStick1.jpg">
							<img class="img-responsive img-center" src="Images/PhotonAirQualityThingyStick1.jpg" alt="Air quality sensor with Photon">
						</a>	
					</div>

					<div class="item">
						<a href="Images/UsbPlug.jpg">
							<img class="img-responsive img-center" src="Images/UsbPlug.jpg" alt="Plugged into a USB mains adaptor">
						</a>	
					</div>			
					
					<div class="item">
						<a href="Images/TVOC-Chart.jpg">
							<img class="img-responsive img-center" src="Images/TVOC-Chart.jpg" alt="Total Volatile Organic Compounds (TVOC) chart from Tinamous.com">
						</a>	
					</div>

					<div class="item">
						<a href="Images/TVOCAndeCO2Chart.jpg">
							<img class="img-responsive img-center" src="Images/TVOCAndeCO2Chart.jpg" alt="Total Volatile Organic Compounds (TVOC) and eCO2 chart from Tinamous.com">
						</a>	
					</div>

					<div class="item">
						<a href="Images/TemperatureAndHumidity.jpg">
							<img class="img-responsive img-center" src="Images/TemperatureAndHumidity.jpg" alt="Temperature and Humidity chart from Tinamous.com">
						</a>	
					</div>

					<div class="item">
						<a href="Images/PcbTop.png">
							<img class="img-responsive img-center" src="Images/PcbTop.png" alt="PCB Top">
						</a>	
					</div>

					<div class="item">
						<a href="Images/PcbBottom.png">
							<img class="img-responsive img-center" src="Images/PcbBottom.png" alt="PCB Bottom">
						</a>	
					</div>

					<div class="item">
						<a href="Images/PcbTopDesign.png">
							<img class="img-responsive img-center" src="Images/PcbTopDesign.png" alt="PCB Top">
						</a>	
					</div>

					<div class="item">
						<a href="Images/PcbBottomDesign.png">
							<img class="img-responsive img-center" src="Images/PcbBottomDesign.png" alt="PCB Bottom">
						</a>	
					</div>


				</div>

				<!-- Left and right controls -->
				<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
					<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
					<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>
		</div>

		<!-- Features -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Features</h2>
				<p>
					<ul>
						<li>Total Volatile Organic Compounds (TVOC) sensor (CCS811)</li>
						<li>equivalent CO2 (eCO2) sensing with the CCS811</li>
						<li>Ambient Light Sensor</li>
						<li>Temperature, Humidity, Barometric Pressure (BME280)</li>
						<li>LED indicator</li>
						<li>Can be plugged directly into a USB outlet</li>
						<li>Additional features can be added through the easy access holes next to the Photon/Electron.</li>
						<li>Headers can connect the stick onto the Particle <a href="https://store.particle.io/collections/shields-and-kits">Asset Tracker</a>.</li>
					</ul>
				</p>
            </div>
		</div>
		
		<!-- Sample Code -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Sample Code</h2>
				<a href="https://go.particle.io/shared_apps/5a56a5d1faa638afe9000b8d">Shared via Particle Build</a>
				<pre>
				<code>
// This #include statement was automatically added by the Particle IDE.
#include &lt;Adafruit_BME280.h&gt;

// ThingySticks Air Quality Stick.
// CCS811 (TVOC and eCO2)
// BME280 (Temperature, Humidity, Pressure)
// TEMT6000 (Light level)


//  CCS811 sample code/library from:
//  https://github.com/sparkfun/CCS811_Air_Quality_Breakout
//  https://github.com/sparkfun/SparkFun_CCS811_Arduino_Library

//  A new sensor requires at 48-burn in. Once burned in a sensor requires
//  20 minutes of run in before readings are considered good.

#include "SparkFunCCS811.h"

#define CCS811_ADDR 0x5B //Default I2C Address
//#define CCS811_ADDR 0x5A //Alternate I2C Address

#define SEALEVELPRESSURE_HPA (1013.25)

// ==================================
// PIN Connections V4.0.1 PCB
// LED                  DAC
// Photodiode           A1
// WAKE     (CCS811)    D6
// RESET    (CCS811)    D5
// INT      (CCS811)    D4
// SCL                  D1
// SDA                  D0

CCS811 ccs(CCS811_ADDR);

Adafruit_BME280 bme;

#define LED_PIN             DAC
#define LIGHT_SENSOR_PIN    A1

bool hasCCS = true;
bool hasBme = true;

void setup()
{
    pinMode(D7, OUTPUT);
    pinMode(LED_PIN, OUTPUT);
    digitalWrite(D7, LOW);
    digitalWrite(LED_PIN, LOW);
    
    Serial.begin(9600);
    Serial.println("ThingySticks V4 Environment Monitor");
    
    
    if (!bme.begin(0x77)) {
      Particle.publish("status","BME280 not found");
      Serial.println("Error: BME280 Not Found!");
      digitalWrite(D7, HIGH);
      hasBme = false;
    } else {
        Particle.publish("status","BME280 initialized");
        delay(1000);
    }
    

    //It is recommended to check return status on .begin(), but it is not
    //required.
    CCS811Core::status returnCode = ccs.begin();
    if (returnCode != CCS811Core::SENSOR_SUCCESS)
    {
        Particle.publish("status","CCS811 returned error. Error: " + String(returnCode));
        Serial.println("Error: CCS811 Not Found!");
        digitalWrite(D7, HIGH);
        hasCCS = false;
    } else {
        Particle.publish("status","CCS811 initialized.");
        delay(1000);
    }

    Particle.publish("status","Environment V4 Online. V0.0.12");
    delay(1000);
}

void loop()
{
    digitalWrite(LED_PIN, HIGH);
    String senml = "";
    
    senml += "{'n':'Light','v': " + String(analogRead(LIGHT_SENSOR_PIN)) + "}";
    
    if (hasCCS) {
        
      //Check to see if data is ready with .dataAvailable()
      if (ccs.dataAvailable())
      {
        //If so, have the sensor read and calculate the results.
        //Get them later
        ccs.readAlgorithmResults();
    
        senml += ",{'n':'CO2','v': " + String(ccs.getCO2()) + "}";
        senml += ",{'n':'TVOC','v': " + String(ccs.getTVOC()) + "}";
      } else {
          if (ccs.checkForStatusError()) {
            uint8_t error = ccs.getErrorRegister();
            Particle.publish("status", "Status error: " + String(error));    
          }
      }
    }
  
    if (hasBme) {
        senml += ",{'n':'T','v': " + String(bme.readTemperature()) + "}";
        senml += ",{'n':'P','v': " + String(bme.readPressure() / 100.0F) + "}";
        senml += ",{'n':'A','v': " + String(bme.readAltitude(SEALEVELPRESSURE_HPA)) + "}";
        senml += ",{'n':'H','v': " + String(bme.readHumidity()) + "}";    
    }

    if (senml != "") {
        Serial.println("Senml: " + senml);
        Particle.publish("senml", "{'e':[" + senml + "]}");
        delay(2000);
    }
    digitalWrite(LED_PIN, LOW);
    
    //System.sleep(SLEEP_MODE_DEEP, 30);
    delay(30000);
}
				</code>
				</pre>
			</div>
		</div>

		<!-- Schematic -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Schematic</h2>
				<p>
					<div class="item">
						<a href="Images/Schematic.png">
							<img class="img-responsive img-center" src="Images/Schematic.png" alt="Schematic">
						</a>		
					</div>
				</p>
            </div>
		</div>

		<!-- Pcb Layout -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">PCB Layout</h2>
				<div>
					<a href="Images/PcbTopDesign.png">
						<img class="img-responsive img-center" src="Images/PcbTopDesign.png" alt="PCB Top Layer">
					</a>		
				</div>
				<div>
					<a href="Images/PcbBottomDesign.png">
						<img class="img-responsive img-center" src="Images/PcbBottomDesign.png" alt="PCB Bottom Layer">
					</a>		
				</div>
            </div>
		</div>

		<!-- Dimensions -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Dimensions</h2>
				<p>
					<ul>
						<li>Length: 94mm</li>
						<li>Width: 32mm</li>
						<li>Tail Width: 10.2mm</li>
						<li>Hole 1: 3.2mm at 14,16</li>
						<li>Hole 2: 3.2mm at 46.5,16</li>
					</ul>
				<p>
            </div>
		</div>

		<!-- References -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">References</h2>
				<p>
					<ul>
						<li><a href="https://github.com/ThingySticks/EnvironmentMonitor/tree/master/Electron/V4">Design files</a>
						<li><a href="https://go.particle.io/shared_apps/5a56a5d1faa638afe9000b8d">Example code</a>
						<li><a href="https://github.com/sparkfun/SparkFun-Eagle-Libraries">SparkFun's excellent Eagle libraries</a></li>
						<li><a href="https://www.sparkfun.com/products/14193">SparkFun's CCS811 breakout board</a></li>
						<li><a href="https://github.com/spark/electron/tree/master/libraries">Particle.io Eagle library</a></li>
						<li><a href="https://github.com/spark/photon">Particle.io Photon Reference</a></li>
						<li><a href="https://docs.particle.io/guide/getting-started/intro/photon/">Particles Electron Getting Started Guide</a></li>
						<li><a href="https://github.com/ThingySticks/EnvironmentMonitor/raw/master/DataSheets/TEMT6000-1918163.pdf">TEMT600 Datasheet</a></li>
						<li><a href="https://github.com/ThingySticks/EnvironmentMonitor/raw/master/DataSheets/CCS811_Datasheet-DS000459.pdf">CCS811 Datasheet</a></li>
						<li><a href="https://github.com/ThingySticks/EnvironmentMonitor/raw/master/DataSheets/CCS811_Programming_Guide.pdf">CCS811 Programming Guide</a></li>
						<li><a href="https://github.com/ThingySticks/EnvironmentMonitor/raw/master/DataSheets/BST-BME280_DS001-11-844833.pdf">BME 280 Datasheet</a></li>
					</ul>
				</p>
            </div>
		</div>

		<!-- Ordering -->
		<div class="row">
			<div class="col-lg-12">
                <h2 class="page-header">Ordering Options</h2>
				<p>
					<a href="https://www.tindie.com/products/ThingySticks/air-quality-sensor-bme280ccs811-thingystick/" class="btn btn-success btn-lg">Buy on Tindie.</a>
				</p>	
	
			</div>
		</div>

		<div class="row">
		</div>

		
		<hr />


        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
					<p>
					<a href="https://www.facebook.com/ThingySticks">Facebook.com/ThingySticks</a>, 
					<a href="https://twitter.com/ThingySticks">@ThingySticks</a>,
					Copyright &copy; Analysis UK Ltd 2016 - 2019
					</p>
					<p>ThingySticks and Thing On A Stick are Registered Trade Marks of Analysis UK Ltd.</p>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="../../js/jquery.js"></script>

 
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
 </body>

</html>
